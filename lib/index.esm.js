import{defineComponent as e,openBlock as l,createElementBlock as a,renderSlot as t,createElementVNode as r,ref as n,onBeforeMount as i,computed as d,watch as u,resolveComponent as o,createBlock as s,unref as c,withCtx as p,Fragment as v,renderList as m,createVNode as h,createCommentVNode as f,createTextVNode as b,toDisplayString as y,nextTick as V}from"vue";const g={class:"mu_Button"};var D=e({name:"clButton",setup:e=>(e,r)=>(l(),a("button",g,[t(e.$slots,"default")]))});D.__file="packages/components/button/src/index.vue",D.install=e=>{e.component(D.name,D)};const _=D;
/*! Element Plus Icons Vue v2.0.6 */var k=(e,l)=>{let a=e.__vccOpts||e;for(let[e,t]of l)a[e]=t;return a},w={name:"Delete"},O={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},E=[r("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1)];var x=k(w,[["render",function(e,t,r,n,i,d){return l(),a("svg",O,E)}],["__file","delete.vue"]]),C={name:"Plus"},S={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},N=[r("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1)];var A=k(C,[["render",function(e,t,r,n,i,d){return l(),a("svg",S,N)}],["__file","plus.vue"]]);const j={class:"single-line-form",style:{display:"inline-block",width:"100%"}};var q=e({__name:"lineForm",props:{type:{type:String,required:!0,default:"input"},label:{type:String,required:!0,default:""},disabled:{type:Boolean,required:!0,default:!1},modelValue:{type:null,required:!0,default:""},renderData:{type:null,required:!0,default:()=>({multiple:!1,options:[{label:"hello",value:"world"}]})},detailVal:{type:null,required:!0,default:()=>({value:""})}},emits:["change","selectChange"],setup(e,{emit:t}){const r=e,h=n();let f={};i((()=>{r.renderData.multiple&&(f=r.detailVal.value),Array.isArray(r.modelValue)?(h.value=r.modelValue,r.modelValue.length>0&&t("selectChange",r.modelValue,r.renderData,r.detailVal,f)):(h.value=r.modelValue.toString(),"select"===r.type&&t("selectChange",r.modelValue,r.renderData))}));const b=e=>{r.renderData?.multiple?t("selectChange",e,r.renderData,r.detailVal,f):t("selectChange",e,r.renderData)},y=d((()=>r.renderData?.disabled||r.disabled));return u(h,(e=>{t("change",e)})),(t,r)=>{const n=o("el-option"),i=o("el-select"),d=o("el-switch"),u=o("el-input");return l(),a("div",j,["select"===e.type?(l(),s(i,{key:0,modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=e=>h.value=e),label:e.label,disabled:c(y),multiple:e.renderData.multiple||!1,placeholder:"请选择",onChange:b},{default:p((()=>[(l(!0),a(v,null,m(e.renderData.options,(e=>(l(),s(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","label","disabled","multiple"])):"switch"===e.type?(l(),s(d,{key:1,modelValue:h.value,"onUpdate:modelValue":r[1]||(r[1]=e=>h.value=e),label:e.label,disabled:c(y),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},null,8,["modelValue","label","disabled"])):(l(),s(u,{key:2,modelValue:h.value,"onUpdate:modelValue":r[2]||(r[2]=e=>h.value=e),label:e.label,disabled:c(y),placeholder:"请输入内容"},null,8,["modelValue","label","disabled"]))])}}});q.__file="packages/components/yamlEdit/src/lineForm.vue";const B={class:"clYamlEdit"},J={style:{padding:"10px",position:"relative"}},U={style:{padding:"10px",position:"relative"}};var z=e({name:"clYamlEdit",props:{renderData:{type:null,required:!0,default:()=>({apple:"2"})},isEdit:{type:Boolean,required:!0,default:()=>!0},labelWidth:{type:String,required:!0,default:()=>"100px"}},emits:["update:renderData"],setup(e,{expose:t,emit:n}){const i=e;let d={};const g=e=>{const l=JSON.parse(JSON.stringify(e));for(let e in l)if(l[e].children)if(l[e].isArray&&Array.isArray(l[e].value)){const a=l[e].value.map((e=>g(e)));l[e]=a}else{const a=g(l[e].value);l[e]=a}else l[e].value?Number.isNaN(Number(l[e].value))?"true"===l[e].value||"false"===l[e].value?l[e]=JSON.parse(l[e].value):l[e]=l[e].value:l[e]=new Number(l[e].value):delete l[e];return l},D=(e,l=!1)=>{for(let a in e)if(e[a].children){const t=D(e[a].children,l);e[a].isArray&&(e[a]={...e[a],value:[t]}),e[a]={...e[a],value:t}}else{const t=e[a].others?.defaultValue||"";l&&e[a].others?.isOnce?delete e[a]:e[a]={...e[a],value:t}}return e},_=(e,l,a,t)=>{if(a?.children){const l=Object.entries(t).filter((l=>e.includes(l[0])));d=a.value=Object.fromEntries(l)||{}}else if(l?.optionRelations){const a=Object.entries(l.optionRelations.descRules).find((l=>l[0]===e));Array.isArray(a)&&2===a.length&&(i.renderData[l.optionRelations.target].desc=a[1])}};return u(i.renderData,(e=>{n("update:renderData",e)}),{deep:!0}),t({initData:(e,l)=>{const a=(e,l)=>{const t=Object.entries(e).reduce(((e,t)=>{if(t[1].children&&l[t[0]]){if(t[1].isArray&&l[t[0]]?.length>0){const r=l[t[0]].map((e=>a(t[1].children,e)));return[...e,[t[0],{...t[1],value:r}]]}if(t[1]?.others?.multiple){const r=Object.keys(l[t[0]]),n=Object.entries(t[1].children).map((e=>Object.keys(l[t[0]]).includes(e[0])?[e[0],l[t[0]][e[0]]]:[e[0],e[1].defaultValue]));return[...e,[t[0],{...t[1],value:a(t[1].children,Object.fromEntries(n)),optionsValue:r}]]}return[...e,[t[0],{...t[1],value:a(t[1].children,l[t[0]])}]]}return void 0!==l[t[0]]?(console.log(l[t[0]]),[...e,[t[0],{...t[1],value:l[t[0]]+""}]]):[...e]}),[]);return Object.fromEntries(t)};return a(e,l)},parseToYaml:g}),(t,n)=>{const i=o("el-col"),u=o("el-form-item"),g=o("el-button"),k=o("clYamlEdit"),w=o("el-icon"),O=o("el-form");return l(),a("div",B,[(l(!0),a(v,null,m(e.renderData,((t,n)=>(l(),s(O,{"label-position":"right","label-width":e.labelWidth,key:n},{default:p((()=>[t.children?f("v-if",!0):(l(),s(u,{key:0,label:t.desc},{default:p((()=>[h(i,{span:24},{default:p((()=>[h(q,{disabled:!e.isEdit,type:t.type,renderData:t.others,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,onSelectChange:_},null,8,["disabled","type","renderData","modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["label"])),f(" 配置项定义多选start "),t.others&&t.others.multiple?(l(),s(u,{key:1,label:t.desc},{default:p((()=>[h(i,{span:24},{default:p((()=>[h(q,{disabled:!e.isEdit,type:t.type,renderData:t.others,detailVal:t,modelValue:t.optionsValue,"onUpdate:modelValue":e=>t.optionsValue=e,onSelectChange:_},null,8,["disabled","type","renderData","detailVal","modelValue","onUpdate:modelValue"])])),_:2},1024),f(' <el-col v-if="value.others && value.others.multiple">\r\n          <clYamlEdit\r\n            :renderData="multiShowData"\r\n            :isEdit="false"\r\n            :label-width="labelWidth"\r\n          />\r\n        </el-col> ')])),_:2},1032,["label"])):f("v-if",!0),f(" && !(value.others && value.others.multiple) "),f(" 配置项定义多选end "),t.children?(l(),s(u,{key:2,label:t.others&&t.others.multiple?"":t.desc},{default:p((()=>[t.isArray&&e.isEdit?(l(),s(i,{key:0,style:{"margin-bottom":"10px"}},{default:p((()=>[h(g,{icon:c(A),onClick:e=>(e=>{let l=!1;e.value.length>=1&&(l=!0);const a=D(JSON.parse(JSON.stringify(e.children)),l);e?.value||(e.value=[]),e.value.push(a)})(t)},{default:p((()=>[b("新增"+y(t.desc),1)])),_:2},1032,["icon","onClick"])])),_:2},1024)):f("v-if",!0),t.isArray?(l(),a(v,{key:2},[f(" 数组类型 "),(l(!0),a(v,null,m(t.value,((a,n)=>(l(),s(i,{key:a.desc+"-"+n,style:{border:"1px solid #ccc","margin-bottom":"10px"}},{default:p((()=>[r("div",U,[e.isEdit?(l(),s(w,{key:0,onClick:e=>((e,l)=>{const a=JSON.parse(JSON.stringify(e));a.value.splice(l,1),e.value=[],V((()=>{e.value=a.value}))})(t,n)},{default:p((()=>[h(c(x))])),_:2},1032,["onClick"])):f("v-if",!0),h(k,{renderData:a,"label-width":e.labelWidth},null,8,["renderData","label-width"])])])),_:2},1024)))),128))],2112)):(l(),s(i,{key:1,style:{border:"1px solid #aaa","margin-bottom":"10px"}},{default:p((()=>[r("div",J,[t.others&&t.others.multiple?(l(),s(k,{key:0,renderData:c(d),"label-width":e.labelWidth},null,8,["renderData","label-width"])):(l(),s(k,{key:1,renderData:t.value,"label-width":e.labelWidth},null,8,["renderData","label-width"]))])])),_:2},1024))])),_:2},1032,["label"])):f("v-if",!0)])),_:2},1032,["label-width"])))),128))])}}});z.__file="packages/components/yamlEdit/src/index.vue",z.install=e=>{e.component(z.name,z)};const H=z,W=[_,H];var Y={install:function(e){W.forEach((l=>e.component(l.name,l)))},...W};export{_ as ClButton,H as clYamlEdit,Y as default};
